<?php/** *   @author Pablo Vanni - pablovanni@gmail.com *   @since 23/02/2005 *   Última Atualização: 14/10/2014 *   Autualizada Por: Pablo Vanni - pablovanni@gmail.com *   @name Verifica permissões e fornece informações de acesso sobre modulos */namespace Zion\Acesso;class Acesso extends AcessoVO{    private $acessoSql;    private $con;    /**     * Acesso::__construct()     *      * @param string $acaoModuloIdPermissao     * @return     */    public function __construct($acaoModuloIdPermissao = '')    {        $this->con = \Zion\Banco\Conexao::conectar();        $this->acessoSql = new AcessoSql();        parent::setModuloNome(constant('MODULO'));        parent::setUsuarioCod($_SESSION['usuarioCod']);                if(!empty($acaoModuloIdPermissao)){            if(!$this->permissaoAcao($acaoModuloIdPermissao)){                throw new \Exception('Sem permissão');            }        }    }    /**     * Acesso::permissaoAcao()     *      * @param mixed $acaoModuloIdPermissao     * @return     */    public function permissaoAcao($acaoModuloIdPermissao)    {        return (bool) $this->con->execNLinhas($this->acessoSql->permissaoAcao(parent::getModuloNome(), $acaoModuloIdPermissao, parent::getUsuarioCod()));    }    /**     * Acesso::dadosModulo()     *      * @return     */    public function dadosModulo()    {        return $this->con->execLinha($this->acessoSql->dadosModulo(parent::getModuloNome()));    }    /**     * Acesso::dadosAcaoModulo()     *      * @param mixed $acaoModuloIdPermissao     * @return     */    public function dadosAcaoModulo($acaoModuloIdPermissao)    {        return $this->con->execLinha($this->acessoSql->dadosAcaoModulo(parent::getModuloNome, $acaoModuloIdPermissao));    }    /**     * Acesso::permissoesModulo()     *      * @return     */    public function permissoesModulo()    {        return $this->con->paraArray($this->acessoSql->permissoesModulo(parent::getModuloNome(), parent::getUsuarioCod()),null, 'acaomoduloidpermissao');    }}